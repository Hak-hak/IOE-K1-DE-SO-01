<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IOE K1 ƒê·ªÄ S·ªê 01 - LUY·ªÜN THI TI·∫æNG ANH</title>
    <!-- Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
      body { 
        font-family: 'Nunito', sans-serif; 
        background-color: #f8fafc; 
        margin: 0; 
        overflow-x: hidden;
      }
      .custom-scrollbar::-webkit-scrollbar { width: 6px; }
      .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
      .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
      
      @keyframes fadeIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }
      .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
      
      @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
      .animate-slide-up { animation: slideUp 0.4s ease-out forwards; }

      @keyframes bounce-short {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-4px); }
      }
      .animate-bounce-short { animation: bounce-short 1s ease-in-out infinite; }

      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
      }
      .animate-shake { animation: shake 0.2s ease-in-out 0s 2; }
      
      .bubble {
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        animation: float 20s infinite linear;
        z-index: 0;
      }
      @keyframes float {
        0% { transform: translateY(0) rotate(0deg); opacity: 0.8; }
        100% { transform: translateY(-1000px) rotate(720deg); opacity: 0; }
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // --- D·ªÆ LI·ªÜU 100 C√ÇU H·ªéI ---
        const QUIZ_DATA = [
            { id: 1, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp th√†nh t·ª´ ƒë√∫ng: CON V·ªäT", rearrangeParts: ["D", "U", "C", "K"], correctAnswer: "DUCK", imageUrl: "https://images.unsplash.com/photo-1555854817-2b226f1a4bb4?w=400", explanation: "Duck nghƒ©a l√† con v·ªãt.", hint: "Con n√†y k√™u 'Qu·∫°c Qu·∫°c' v√† th√≠ch b∆°i h·ªì. Ch·ªØ ƒë·∫ßu l√† D nh√©!" },
            { id: 2, type: 'MULTIPLE_CHOICE', questionText: "Ch·ªçn t·ª´ c√≥ ch·ª©a ch·ªØ c√°i 'A':", options: ["bike", "river", "sand", "ride"], correctAnswer: "sand", imageUrl: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=400", explanation: "Trong t·ª´ 'sand' (c√°t) c√≥ ch·ª©a ch·ªØ 'a'.", hint: "B√© hay d√πng n√≥ ƒë·ªÉ x√¢y l√¢u ƒë√†i ·ªü b√£i bi·ªÉn." },
            { id: 3, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp th√†nh t·ª´ ƒë√∫ng: C√ÅI B√ÄN H·ªåC", rearrangeParts: ["D", "E", "S", "K"], correctAnswer: "DESK", imageUrl: "https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=400", explanation: "Desk nghƒ©a l√† c√°i b√†n h·ªçc.", hint: "V·∫≠t d·ª•ng b√© d√πng ng·ªìi h·ªçc b√†i m·ªói t·ªëi." },
            { id: 4, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp th√†nh t·ª´ ƒë√∫ng: C√ÅI T√ÅCH/CH√âN", rearrangeParts: ["C", "U", "P"], correctAnswer: "CUP", imageUrl: "https://images.unsplash.com/photo-1577931957312-0975b9278964?w=400", explanation: "Cup nghƒ©a l√† c√°i t√°ch u·ªëng n∆∞·ªõc.", hint: "T·ª´ n√†y ch·ªâ c√≥ 3 ch·ªØ c√°i th√¥i, b·∫Øt ƒë·∫ßu b·∫±ng C." },
            { id: 5, type: 'MULTIPLE_CHOICE', questionText: "Ch·ªçn t·ª´ ƒë√∫ng cho: C·∫¶U V·ªíNG", options: ["Rainbow", "Sun", "Cloud", "Rain"], correctAnswer: "Rainbow", imageUrl: "https://images.unsplash.com/photo-1444491741275-3747c53c99b4?w=400", explanation: "Rainbow nghƒ©a l√† c·∫ßu v·ªìng.", hint: "N√≥ c√≥ 7 m√†u v√† xu·∫•t hi·ªán sau c∆°n m∆∞a." },
            { id: 6, type: 'REARRANGE', questionText: "Nghe v√† s·∫Øp x·∫øp: SINH NH·∫¨T", rearrangeParts: ["B", "I", "R", "T", "H", "D", "A", "Y"], correctAnswer: "BIRTHDAY", imageUrl: "https://images.unsplash.com/photo-1533276395701-c274ca090185?w=400", explanation: "Birthday nghƒ©a l√† ng√†y sinh nh·∫≠t.", hint: "B·∫Øt ƒë·∫ßu b·∫±ng ch·ªØ B, ng√†y b√© c√≥ b√°nh kem v√† qu√†." },
            { id: 7, type: 'MULTIPLE_CHOICE', questionText: "Ch·ªçn t·ª´ c√≥ ch·ª©a ch·ªØ c√°i 'C':", options: ["write", "hi", "dog", "cat"], correctAnswer: "cat", imageUrl: "https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400", explanation: "T·ª´ 'cat' (con m√®o) b·∫Øt ƒë·∫ßu b·∫±ng ch·ªØ 'c'.", hint: "Con v·∫≠t n√†y k√™u 'Meo Meo'." },
            { id: 8, type: 'FILL_IN_BLANK', questionText: "ƒêi·ªÅn t·ª´: Let's look at the s_ _ . (B·∫ßu tr·ªùi)", correctAnswer: "sky", imageUrl: "https://images.unsplash.com/photo-1534067783941-51c9c23ecefd?w=400", explanation: "Sky nghƒ©a l√† b·∫ßu tr·ªùi.", hint: "B√© nh√¨n l√™n cao, n∆°i c√≥ m√¢y tr√¥i." },
            { id: 9, type: 'FILL_IN_BLANK', questionText: "ƒê·∫øm s·ªë l∆∞·ª£ng con m√®o trong h√¨nh:", correctAnswer: "four", imageUrl: "https://images.unsplash.com/photo-1727419522509-2c2b393ee16b?auto=format&fit=crop&w=400&q=80", explanation: "S·ªë 4 l√† 'four'.", hint: "ƒê·∫øm: One, Two, Three...?" },
            { id: 10, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp th√†nh t·ª´: CH√ì CON", rearrangeParts: ["P", "U", "P", "P", "Y"], correctAnswer: "PUPPY", imageUrl: "https://images.unsplash.com/photo-1543466835-00a7907e9de1?w=400", explanation: "Puppy nghƒ©a l√† ch√≥ con.", hint: "B·∫Øt ƒë·∫ßu b·∫±ng ch·ªØ P, c√≥ 2 ch·ªØ P ·ªü gi·ªØa." },
            { id: 11, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: S·ªê 14", rearrangeParts: ["F", "O", "U", "R", "T", "E", "E", "N"], correctAnswer: "FOURTEEN", imageUrl: "https://images.unsplash.com/photo-1502139214982-d0ad755818d8?w=400", explanation: "Fourteen l√† 14.", hint: "S·ªë 4 (Four) th√™m ƒëu√¥i 'teen'." },
            { id: 12, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: S·ªê 10", rearrangeParts: ["T", "E", "N"], correctAnswer: "TEN", imageUrl: "https://images.unsplash.com/photo-1599508704512-2f19fe912053?w=400", explanation: "Ten l√† 10.", hint: "B·∫Øt ƒë·∫ßu b·∫±ng ch·ªØ T." },
            { id: 13, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: S·ªê 19", rearrangeParts: ["N", "I", "N", "E", "T", "E", "E", "N"], correctAnswer: "NINETEEN", imageUrl: "https://images.unsplash.com/photo-1534351590666-13e3e96b5017?w=400", explanation: "Nineteen l√† 19.", hint: "S·ªë 9 (Nine) th√™m ƒëu√¥i 'teen'." },
            { id: 14, type: 'FILL_IN_BLANK', questionText: "ƒê·∫øm s·ªë con b√≤ trong h√¨nh:", correctAnswer: "two", imageUrl: "https://images.unsplash.com/photo-1570124815600-07fad0157a98?auto=format&fit=crop&w=500&q=60
", explanation: "Two l√† 2.", hint: "ƒê·∫øm xem c√≥ m·∫•y b·∫°n b√≤." },
            { id: 15, type: 'MULTIPLE_CHOICE', questionText: "Ch·ªçn h√¨nh ƒë√∫ng: KITE", options: ["Ball", "Kite", "Doll", "Car"], correctAnswer: "Kite", imageUrl: "https://images.unsplash.com/photo-1510137617477-8079ba75e927?w=400", explanation: "Kite l√† c√°i di·ªÅu.", hint: "V·∫≠t n√†y bay cao nh·ªù gi√≥." },
            { id: 16, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: CON C√ÅO", rearrangeParts: ["F", "O", "X"], correctAnswer: "FOX", imageUrl: "https://images.unsplash.com/photo-1516934024742-b461fba47600?w=400", explanation: "Fox l√† con c√°o.", hint: "K·∫øt th√∫c b·∫±ng ch·ªØ X." },
            { id: 17, type: 'FILL_IN_BLANK', questionText: "ƒêi·ªÅn t·ª´: It's a s_ _ _ _ day. (N·∫Øng)", correctAnswer: "sunny", imageUrl: "https://images.unsplash.com/photo-1541119638723-c51cbe2262aa?w=400", explanation: "Sunny l√† tr·ªùi n·∫Øng.", hint: "B·∫Øt ƒë·∫ßu b·∫±ng 'Sun'." },
            { id: 18, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: CON ONG", rearrangeParts: ["B", "E", "E"], correctAnswer: "BEE", imageUrl: "https://images.unsplash.com/photo-1473116763249-2faaef81ccda?w=400", explanation: "Bee l√† con ong.", hint: "ChƒÉm ch·ªâ ƒëi t√¨m m·∫≠t." },
            { id: 19, type: 'FILL_IN_BLANK', questionText: "ƒêi·ªÅn ch·ªØ: Q_ESTION (C√¢u h·ªèi)", correctAnswer: "U", imageUrl: "https://images.unsplash.com/photo-1516321497487-e288fb19713f?w=400", explanation: "Question l√† c√¢u h·ªèi.", hint: "Sau ch·ªØ Q th∆∞·ªùng l√† ch·ªØ U." },
            { id: 20, type: 'MULTIPLE_CHOICE', questionText: "√Çm gi·ªëng 'G' trong 'Goat':", options: ["Garden", "Giraffe", "George", "Giant"], correctAnswer: "Garden", imageUrl: "https://images.unsplash.com/photo-1585320806297-9794b3e4eeae?w=400", explanation: "Garden (khu v∆∞·ªùn) c√≥ √¢m /g/.", hint: "N∆°i c√≥ nhi·ªÅu hoa." },
            { id: 21, type: 'MULTIPLE_CHOICE', questionText: "S·ªë 1 ti·∫øng Anh l√† g√¨?", options: ["One", "Two", "Three", "Four"], correctAnswer: "One", imageUrl: "https://images.unsplash.com/photo-1599508704512-2f19fe912053?w=400", explanation: "One l√† 1.", hint: "S·ªë ƒë·∫ßu ti√™n b√© h·ªçc." },
            { id: 22, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: QU·∫¢ T√ÅO", rearrangeParts: ["A", "P", "P", "L", "E"], correctAnswer: "APPLE", imageUrl: "https://images.unsplash.com/photo-1567306226416-28f0efdc88ce?w=400", explanation: "Apple l√† qu·∫£ t√°o.", hint: "Qu·∫£ tr√≤n m√†u ƒë·ªè." },
            { id: 23, type: 'FILL_IN_BLANK', questionText: "ƒêi·ªÅn t·ª´: A red b_ _ . (C√°i t√∫i)", correctAnswer: "bag", imageUrl: "https://images.unsplash.com/photo-1544816155-12df9643f363?w=400", explanation: "Bag l√† c√°i t√∫i.", hint: "B√© d√πng ƒë·ªÉ ƒë·ª±ng s√°ch." },
            { id: 24, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: CON KI·∫æN", rearrangeParts: ["A", "N", "T"], correctAnswer: "ANT", imageUrl: "https://images.unsplash.com/photo-1581333100576-b73bbe92c2cb?w=400", explanation: "Ant l√† con ki·∫øn.", hint: "Con v·∫≠t r·∫•t nh·ªè b√©." },
            { id: 25, type: 'MULTIPLE_CHOICE', questionText: "M√†u ƒë·ªè l√† g√¨?", options: ["Red", "Blue", "Green", "Yellow"], correctAnswer: "Red", imageUrl: "https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=400", explanation: "Red l√† m√†u ƒë·ªè.", hint: "M√†u c·ªßa qu·∫£ t√°o ch√≠n." },
            { id: 26, type: 'FILL_IN_BLANK', questionText: "I can r_ _ . (Ch·∫°y)", correctAnswer: "run", imageUrl: "https://images.unsplash.com/photo-1476480862126-209bfaa8edc8?w=400", explanation: "Run l√† ch·∫°y.", hint: "Di chuy·ªÉn r·∫•t nhanh b·∫±ng ch√¢n." },
            { id: 27, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: CON C√Å", rearrangeParts: ["F", "I", "S", "H"], correctAnswer: "FISH", imageUrl: "https://images.unsplash.com/photo-1524704659690-3f7a37d9ee26?w=400", explanation: "Fish l√† con c√°.", hint: "S·ªëng d∆∞·ªõi n∆∞·ªõc." },
            { id: 28, type: 'MULTIPLE_CHOICE', questionText: "H√¨nh tr√≤n l√† g√¨?", options: ["Square", "Circle", "Star", "Oval"], correctAnswer: "Circle", imageUrl: "https://images.unsplash.com/photo-1550684848-fac1c5b4e853?w=400", explanation: "Circle l√† h√¨nh tr√≤n.", hint: "Gi·ªëng nh∆∞ √¥ng m·∫∑t tr·ªùi." },
            { id: 29, type: 'FILL_IN_BLANK', questionText: "A green t_ _ _ . (C√°i c√¢y)", correctAnswer: "tree", imageUrl: "https://images.unsplash.com/photo-1513836279014-a89f7076ae86?w=400", explanation: "Tree l√† c√°i c√¢y.", hint: "C√≥ l√° xanh v√† b√≥ng m√°t." },
            { id: 30, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: √î T√î", rearrangeParts: ["C", "A", "R"], correctAnswer: "CAR", imageUrl: "https://images.unsplash.com/photo-1494976388531-d1058494cdd8?w=400", explanation: "Car l√† √¥ t√¥.", hint: "Ph∆∞∆°ng ti·ªán c√≥ 4 b√°nh." },
            { id: 31, type: 'MULTIPLE_CHOICE', questionText: "S·ªë 5 l√† g√¨?", options: ["Four", "Five", "Six", "Seven"], correctAnswer: "Five", imageUrl: "https://images.unsplash.com/photo-1599508704512-2f19fe912053?w=400", explanation: "Five l√† 5.", hint: "B·∫Øt ƒë·∫ßu b·∫±ng ch·ªØ F." },
            { id: 32, type: 'FILL_IN_BLANK', questionText: "I like p_ _ _ _ . (M·ª≥ √ù)", correctAnswer: "pasta", imageUrl: "https://images.unsplash.com/photo-1473093226795-af9932fe5856?w=400", explanation: "Pasta l√† m·ª≥ √ù.", hint: "M√≥n m·ª≥ s·ª£i d√†i ngon mi·ªáng." },
            { id: 33, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: CON CHIM", rearrangeParts: ["B", "I", "R", "D"], correctAnswer: "BIRD", imageUrl: "https://images.unsplash.com/photo-1444464666168-49d633b867ad?w=400", explanation: "Bird l√† con chim.", hint: "C√≥ th·ªÉ bay l∆∞·ª£n tr√™n tr·ªùi." },
            { id: 34, type: 'MULTIPLE_CHOICE', questionText: "M√†u xanh d∆∞∆°ng l√† g√¨?", options: ["Red", "Blue", "Green", "White"], correctAnswer: "Blue", imageUrl: "https://images.unsplash.com/photo-1534067783941-51c9c23ecefd?w=400", explanation: "Blue l√† xanh d∆∞∆°ng.", hint: "M√†u c·ªßa b·∫ßu tr·ªùi." },
            { id: 35, type: 'FILL_IN_BLANK', questionText: "A big b_ _ _ . (Qu·∫£ b√≥ng)", correctAnswer: "ball", imageUrl: "https://images.unsplash.com/photo-1589311145657-69b563f458e0?w=400", explanation: "Ball l√† qu·∫£ b√≥ng.", hint: "B√© d√πng ch√¢n ƒë√° n√≥." },
            { id: 36, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: M·∫∏", rearrangeParts: ["M", "O", "T", "H", "E", "R"], correctAnswer: "MOTHER", imageUrl: "https://images.unsplash.com/photo-1511895426328-dc8714191300?w=400", explanation: "Mother l√† m·∫π.", hint: "Ng∆∞·ªùi ph·ª• n·ªØ y√™u b√© nh·∫•t." },
            { id: 37, type: 'MULTIPLE_CHOICE', questionText: "S·ªë 10 l√† g√¨?", options: ["Ten", "Two", "Zero", "One"], correctAnswer: "Ten", imageUrl: "https://images.unsplash.com/photo-1599508704512-2f19fe912053?w=400", explanation: "Ten l√† 10.", hint: "B·∫Øt ƒë·∫ßu b·∫±ng T." },
            { id: 38, type: 'FILL_IN_BLANK', questionText: "Wash your h_ _ _ _ . (Tay)", correctAnswer: "hands", imageUrl: "https://images.unsplash.com/photo-1511895426328-dc8714191300?w=400", explanation: "Hands l√† ƒë√¥i tay.", hint: "B√© c·∫ßn r·ª≠a s·∫°ch tr∆∞·ªõc khi ƒÉn." },
            { id: 39, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: CON L·ª¢N", rearrangeParts: ["P", "I", "G"], correctAnswer: "PIG", imageUrl: "https://images.unsplash.com/photo-1516467508483-a7212febe31a?w=400", explanation: "Pig l√† con l·ª£n.", hint: "Con v·∫≠t k√™u ·ªßn ·ªân." },
            { id: 40, type: 'MULTIPLE_CHOICE', questionText: "Qu·∫£ chu·ªëi l√† g√¨?", options: ["Apple", "Orange", "Banana", "Pear"], correctAnswer: "Banana", imageUrl: "https://images.unsplash.com/photo-1528825876231-237a40386924?w=400", explanation: "Banana l√† chu·ªëi.", hint: "Qu·∫£ d√†i m√†u v√†ng." },
            // Th√™m ti·∫øp cho ƒë·ªß 100 c√¢u... (L∆∞u √Ω: B·∫°n c√≥ th·ªÉ m·ªü r·ªông danh s√°ch n√†y n·∫øu mu·ªën)
            { id: 41, type: 'FILL_IN_BLANK', questionText: "I can s_ _ _ . (H√°t)", correctAnswer: "sing", imageUrl: "https://images.unsplash.com/photo-1516280440614-37939bbacd81?w=400", explanation: "Sing l√† h√°t.", hint: "B√© d√πng gi·ªçng ƒë·ªÉ t·∫°o ra √¢m nh·∫°c." },
            { id: 42, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: NG√îI SAO", rearrangeParts: ["S", "T", "A", "R"], correctAnswer: "STAR", imageUrl: "https://images.unsplash.com/photo-1506318137071-a8e063b4b519?w=400", explanation: "Star l√† ng√¥i sao.", hint: "L·∫•p l√°nh tr√™n tr·ªùi ƒë√™m." },
            { id: 43, type: 'MULTIPLE_CHOICE', questionText: "S·ªë 2 l√† g√¨?", options: ["One", "Two", "Three", "Four"], correctAnswer: "Two", imageUrl: "https://images.unsplash.com/photo-1599508704512-2f19fe912053?w=400", explanation: "Two l√† 2.", hint: "S·ªë ng√≥n tay c·ªßa d·∫•u h√≤a b√¨nh." },
            { id: 44, type: 'FILL_IN_BLANK', questionText: "A white e_ _ . (Qu·∫£ tr·ª©ng)", correctAnswer: "egg", imageUrl: "https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?w=400", explanation: "Egg l√† qu·∫£ tr·ª©ng.", hint: "Con g√† ƒë·∫ª ra qu·∫£ n√†y." },
            { id: 45, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: C√ÅI H·ªòP", rearrangeParts: ["B", "O", "X"], correctAnswer: "BOX", imageUrl: "https://images.unsplash.com/photo-1530587191325-3db32d826c18?w=400", explanation: "Box l√† c√°i h·ªôp.", hint: "B-O-X." },
            { id: 46, type: 'MULTIPLE_CHOICE', questionText: "Con ch√≥ l√† g√¨?", options: ["Dog", "Cat", "Bird", "Pig"], correctAnswer: "Dog", imageUrl: "https://images.unsplash.com/photo-1543466835-00a7907e9de1?w=400", explanation: "Dog l√† con ch√≥.", hint: "K√™u 'G√¢u G√¢u'." },
            { id: 47, type: 'FILL_IN_BLANK', questionText: "Open the d_ _ _ . (C√°i c·ª≠a)", correctAnswer: "door", imageUrl: "https://images.unsplash.com/photo-1534073737927-85f1ebff1f5d?w=400", explanation: "Door l√† c√°i c·ª≠a.", hint: "ƒê·ªÉ b√© ra v√†o ph√≤ng." },
            { id: 48, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: QU·∫¢ CAM", rearrangeParts: ["O", "R", "A", "N", "G", "E"], correctAnswer: "ORANGE", imageUrl: "https://images.unsplash.com/photo-1547517023-7ca0c162f816?w=400", explanation: "Orange l√† qu·∫£ cam.", hint: "V·ª´a l√† t√™n qu·∫£, v·ª´a l√† t√™n m√†u." },
            { id: 49, type: 'MULTIPLE_CHOICE', questionText: "M√†u xanh l√° l√† g√¨?", options: ["Red", "Blue", "Green", "Pink"], correctAnswer: "Green", imageUrl: "https://images.unsplash.com/photo-1513836279014-a89f7076ae86?w=400", explanation: "Green l√† m√†u xanh l√°.", hint: "M√†u c·ªßa c√¢y c·ªè." },
            { id: 50, type: 'FILL_IN_BLANK', questionText: "A cute r_ _ _ _ _ . (Con th·ªè)", correctAnswer: "rabbit", imageUrl: "https://images.unsplash.com/photo-1585110396054-c8aa01c79781?w=400", explanation: "Rabbit l√† con th·ªè.", hint: "Tai d√†i v√† th√≠ch ƒÉn c√† r·ªët." },
            { id: 51, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: M√ÅY BAY", rearrangeParts: ["P", "L", "A", "N", "E"], correctAnswer: "PLANE", imageUrl: "https://images.unsplash.com/photo-1517976487492-5750f3195933?w=400", explanation: "Plane l√† m√°y bay.", hint: "Bay r·∫•t cao tr√™n m√¢y." },
            { id: 52, type: 'MULTIPLE_CHOICE', questionText: "S·ªë 7 l√† g√¨?", options: ["Six", "Seven", "Eight", "Nine"], correctAnswer: "Seven", imageUrl: "https://images.unsplash.com/photo-1599508704512-2f19fe912053?w=400", explanation: "Seven l√† 7.", hint: "B·∫Øt ƒë·∫ßu b·∫±ng ch·ªØ S." },
            { id: 53, type: 'FILL_IN_BLANK', questionText: "I drink m_ _ _ . (S·ªØa)", correctAnswer: "milk", imageUrl: "https://images.unsplash.com/photo-1550583724-125581fe2f8a?w=400", explanation: "Milk l√† s·ªØa.", hint: "ƒê·ªì u·ªëng m√†u tr·∫Øng gi√∫p b√© kh·ªèe m·∫°nh." },
            { id: 54, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: CON KH·ªà", rearrangeParts: ["M", "O", "N", "K", "E", "Y"], correctAnswer: "MONKEY", imageUrl: "https://images.unsplash.com/photo-1540573133985-87b6da6d54a9?w=400", explanation: "Monkey l√† con kh·ªâ.", hint: "R·∫•t th√≠ch ƒÉn chu·ªëi v√† leo tr√®o." },
            { id: 55, type: 'MULTIPLE_CHOICE', questionText: "C√°i m≈© l√† g√¨?", options: ["Hat", "Shoes", "Shirt", "Socks"], correctAnswer: "Hat", imageUrl: "https://images.unsplash.com/photo-1521369909029-2afed882baee?w=400", explanation: "Hat l√† c√°i m≈©.", hint: "ƒê·ªÉ b√© ƒë·ªôi l√™n ƒë·∫ßu." },
            { id: 56, type: 'FILL_IN_BLANK', questionText: "A small f_ _ _ . (Con ·∫øch)", correctAnswer: "frog", imageUrl: "https://images.unsplash.com/photo-1559190394-df5a28aab5c5?w=400", explanation: "Frog l√† con ·∫øch.", hint: "Nh·∫£y l·ªôp ƒë·ªôp v√† k√™u ·ªôp ·ªôp." },
            { id: 57, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: √î T√î T·∫¢I", rearrangeParts: ["T", "R", "U", "C", "K"], correctAnswer: "TRUCK", imageUrl: "https://images.unsplash.com/photo-1586191582056-a3674686cc93?w=400", explanation: "Truck l√† √¥ t√¥ t·∫£i.", hint: "Xe ch·ªü nhi·ªÅu h√†ng h√≥a." },
            { id: 58, type: 'MULTIPLE_CHOICE', questionText: "Con g√† l√† g√¨?", options: ["Chicken", "Cow", "Horse", "Sheep"], correctAnswer: "Chicken", imageUrl: "https://images.unsplash.com/photo-1548550023-2bdb3c5beed7?w=400", explanation: "Chicken l√† con g√†.", hint: "K√™u c·ª•c ta c·ª•c t√°c." },
            { id: 59, type: 'FILL_IN_BLANK', questionText: "Look at my p_ _ . (C√°i b√∫t)", correctAnswer: "pen", imageUrl: "https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=400", explanation: "Pen l√† c√°i b√∫t.", hint: "D√πng ƒë·ªÉ vi·∫øt b√†i." },
            { id: 60, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: QU·∫¢ L√ä", rearrangeParts: ["P", "E", "A", "R"], correctAnswer: "PEAR", imageUrl: "https://images.unsplash.com/photo-1514756331096-242f3900f84f?w=400", explanation: "Pear l√† qu·∫£ l√™.", hint: "Qu·∫£ c√≥ h√¨nh gi·ªëng c√°i chu√¥ng." },
            { id: 61, type: 'MULTIPLE_CHOICE', questionText: "M√†u v√†ng l√† g√¨?", options: ["Red", "Blue", "Green", "Yellow"], correctAnswer: "Yellow", imageUrl: "https://images.unsplash.com/photo-1570125909232-eb263c188f7e?w=400", explanation: "Yellow l√† m√†u v√†ng.", hint: "M√†u c·ªßa hoa h∆∞·ªõng d∆∞∆°ng." },
            { id: 62, type: 'FILL_IN_BLANK', questionText: "A fast b_ _ _ . (C√°i thuy·ªÅn)", correctAnswer: "boat", imageUrl: "https://images.unsplash.com/photo-1544551763-47a0159f963f?w=400", explanation: "Boat l√† c√°i thuy·ªÅn.", hint: "ƒêi tr√™n m·∫∑t n∆∞·ªõc." },
            { id: 63, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: S√ÅCH", rearrangeParts: ["B", "O", "O", "K"], correctAnswer: "BOOK", imageUrl: "https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=400", explanation: "Book l√† cu·ªën s√°ch.", hint: "C√≥ nhi·ªÅu tranh v√† ch·ªØ." },
            { id: 64, type: 'MULTIPLE_CHOICE', questionText: "Con b√≤ l√† g√¨?", options: ["Cow", "Cat", "Dog", "Duck"], correctAnswer: "Cow", imageUrl: "https://images.unsplash.com/photo-1570042225831-d98fa7577f1e?w=400", explanation: "Cow l√† con b√≤.", hint: "Cho ch√∫ng ta s·ªØa u·ªëng." },
            { id: 65, type: 'FILL_IN_BLANK', questionText: "Wash your f_ _ _ . (Khu√¥n m·∫∑t)", correctAnswer: "face", imageUrl: "https://images.unsplash.com/photo-1511895426328-dc8714191300?w=400", explanation: "Face l√† khu√¥n m·∫∑t.", hint: "B√© r·ª≠a m·∫∑t cho s·∫°ch xinh." },
            { id: 66, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: GIA ƒê√åNH", rearrangeParts: ["F", "A", "M", "I", "L", "Y"], correctAnswer: "FAMILY", imageUrl: "https://images.unsplash.com/photo-1511895426328-dc8714191300?w=400", explanation: "Family l√† gia ƒë√¨nh.", hint: "G·ªìm b·ªë, m·∫π v√† b√©." },
            { id: 67, type: 'MULTIPLE_CHOICE', questionText: "S·ªë 8 l√† g√¨?", options: ["Six", "Seven", "Eight", "Nine"], correctAnswer: "Eight", imageUrl: "https://images.unsplash.com/photo-1599508704512-2f19fe912053?w=400", explanation: "Eight l√† s·ªë 8.", hint: "Tr√¥ng gi·ªëng hai v√≤ng tr√≤n ch·ªìng l√™n nhau." },
            { id: 68, type: 'FILL_IN_BLANK', questionText: "Eat your p_ _ _ _ . (B√°nh Pizza)", correctAnswer: "pizza", imageUrl: "https://images.unsplash.com/photo-1513104890138-7c749659a591?w=400", explanation: "Pizza l√† b√°nh Pizza.", hint: "M√≥n b√°nh tr√≤n c√≥ nhi·ªÅu nh√¢n." },
            { id: 69, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: C√ÅI C·ªêC", rearrangeParts: ["G", "L", "A", "S", "S"], correctAnswer: "GLASS", imageUrl: "https://images.unsplash.com/photo-1577931957312-0975b9278964?w=400", explanation: "Glass l√† c√°i c·ªëc th·ªßy tinh.", hint: "D√πng ƒë·ªÉ u·ªëng n∆∞·ªõc." },
            { id: 70, type: 'MULTIPLE_CHOICE', questionText: "B·ªë l√† g√¨?", options: ["Father", "Mother", "Brother", "Sister"], correctAnswer: "Father", imageUrl: "https://images.unsplash.com/photo-1511895426328-dc8714191300?w=400", explanation: "Father l√† b·ªë.", hint: "Ng∆∞·ªùi ƒë√†n √¥ng trong gia ƒë√¨nh." },
            { id: 71, type: 'FILL_IN_BLANK', questionText: "A red r_ _ _ . (Hoa h·ªìng)", correctAnswer: "rose", imageUrl: "https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?w=400", explanation: "Rose l√† hoa h·ªìng.", hint: "Lo√†i hoa r·∫•t ƒë·∫πp v√† c√≥ h∆∞∆°ng th∆°m." },
            { id: 72, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: M√ÄU H·ªíNG", rearrangeParts: ["P", "I", "N", "K"], correctAnswer: "PINK", imageUrl: "https://images.unsplash.com/photo-1516627145497-ae6968895b74?w=400", explanation: "Pink l√† m√†u h·ªìng.", hint: "M√†u b√© g√°i th∆∞·ªùng th√≠ch." },
            { id: 73, type: 'MULTIPLE_CHOICE', questionText: "S·ªë 3 l√† g√¨?", options: ["One", "Two", "Three", "Four"], correctAnswer: "Three", imageUrl: "https://images.unsplash.com/photo-1599508704512-2f19fe912053?w=400", explanation: "Three l√† s·ªë 3.", hint: "B·∫Øt ƒë·∫ßu b·∫±ng ch·ªØ T." },
            { id: 74, type: 'FILL_IN_BLANK', questionText: "The s_ _ is blue.", correctAnswer: "sun", imageUrl: "https://images.unsplash.com/photo-1541119638723-c51cbe2262aa?w=400", explanation: "Sun l√† m·∫∑t tr·ªùi.", hint: "T·ªèa n·∫Øng ·∫•m √°p." },
            { id: 75, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: CON R·∫ÆN", rearrangeParts: ["S", "N", "A", "K", "E"], correctAnswer: "SNAKE", imageUrl: "https://images.unsplash.com/photo-1528183429752-a97d0bf99b5a?w=400", explanation: "Snake l√† con r·∫Øn.", hint: "Th√¢n d√†i v√† tr∆∞·ªùn tr√™n ƒë·∫•t." },
            { id: 76, type: 'MULTIPLE_CHOICE', questionText: "M√†u tr·∫Øng l√† g√¨?", options: ["White", "Black", "Red", "Grey"], correctAnswer: "White", imageUrl: "https://images.unsplash.com/photo-1582722872445-44dc5f7e3c8f?w=400", explanation: "White l√† m√†u tr·∫Øng.", hint: "M√†u c·ªßa tuy·∫øt ho·∫∑c s·ªØa." },
            { id: 77, type: 'FILL_IN_BLANK', questionText: "I have two e_ _ _ . (ƒê√¥i m·∫Øt)", correctAnswer: "eyes", imageUrl: "https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400", explanation: "Eyes l√† ƒë√¥i m·∫Øt.", hint: "B√© d√πng ƒë·ªÉ nh√¨n m·ªçi th·ª©." },
            { id: 78, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: C√ÅNH TAY", rearrangeParts: ["A", "R", "M"], correctAnswer: "ARM", imageUrl: "https://images.unsplash.com/photo-1511895426328-dc8714191300?w=400", explanation: "Arm l√† c√°nh tay.", hint: "B·∫Øt ƒë·∫ßu b·∫±ng ch·ªØ A." },
            { id: 79, type: 'MULTIPLE_CHOICE', questionText: "S·ªë 9 l√† g√¨?", options: ["Seven", "Eight", "Nine", "Ten"], correctAnswer: "Nine", imageUrl: "https://images.unsplash.com/photo-1599508704512-2f19fe912053?w=400", explanation: "Nine l√† 9.", hint: "Tr∆∞·ªõc s·ªë 10." },
            { id: 80, type: 'FILL_IN_BLANK', questionText: "A brown d_ _ . (Con ch√≥)", correctAnswer: "dog", imageUrl: "https://images.unsplash.com/photo-1543466835-00a7907e9de1?w=400", explanation: "Dog l√† con ch√≥.", hint: "K√™u 'G√¢u G√¢u'." },
            { id: 81, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: B√öT CH√å", rearrangeParts: ["P", "E", "N", "C", "I", "L"], correctAnswer: "PENCIL", imageUrl: "https://images.unsplash.com/photo-1513364776144-60967b0f800f?w=400", explanation: "Pencil l√† b√∫t ch√¨.", hint: "B√© d√πng ƒë·ªÉ v·∫Ω tranh." },
            { id: 82, type: 'MULTIPLE_CHOICE', questionText: "Qu·∫£ cam l√† g√¨?", options: ["Orange", "Lemon", "Apple", "Grape"], correctAnswer: "Orange", imageUrl: "https://images.unsplash.com/photo-1547517023-7ca0c162f816?w=400", explanation: "Orange l√† cam.", hint: "Qu·∫£ c√≥ nhi·ªÅu n∆∞·ªõc v√† m√†u cam." },
            { id: 83, type: 'FILL_IN_BLANK', questionText: "The c_ _ is meowing.", correctAnswer: "cat", imageUrl: "https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=400", explanation: "Cat l√† con m√®o.", hint: "Meo meo!" },
            { id: 84, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: CON NG·ª∞A", rearrangeParts: ["H", "O", "R", "S", "E"], correctAnswer: "HORSE", imageUrl: "https://images.unsplash.com/photo-1553284965-83fd3e82fa5a?w=400", explanation: "Horse l√† con ng·ª±a.", hint: "Ch·∫°y r·∫•t nhanh tr√™n ƒë·ªìng c·ªè." },
            { id: 85, type: 'MULTIPLE_CHOICE', questionText: "S·ªë 6 l√† g√¨?", options: ["Five", "Six", "Seven", "Eight"], correctAnswer: "Six", imageUrl: "https://images.unsplash.com/photo-1599508704512-2f19fe912053?w=400", explanation: "Six l√† 6.", hint: "S-I-X." },
            { id: 86, type: 'FILL_IN_BLANK', questionText: "Wash your l_ _ _ . (ƒê√¥i ch√¢n)", correctAnswer: "legs", imageUrl: "https://images.unsplash.com/photo-1476480862126-209bfaa8edc8?w=400", explanation: "Legs l√† ƒë√¥i ch√¢n.", hint: "D√πng ƒë·ªÉ ƒëi v√† ch·∫°y." },
            { id: 87, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: C√ÅI GI∆Ø·ªúNG", rearrangeParts: ["B", "E", "D"], correctAnswer: "BED", imageUrl: "https://images.unsplash.com/photo-1505691938895-1758d7eaa511?w=400", explanation: "Bed l√† c√°i gi∆∞·ªùng.", hint: "N∆°i b√© ng·ªß m·ªói t·ªëi." },
            { id: 88, type: 'MULTIPLE_CHOICE', questionText: "M√†u ƒëen l√† g√¨?", options: ["White", "Black", "Pink", "Blue"], correctAnswer: "Black", imageUrl: "https://images.unsplash.com/photo-1530587191325-3db32d826c18?w=400", explanation: "Black l√† m√†u ƒëen.", hint: "M√†u c·ªßa b√≥ng ƒë√™m." },
            { id: 89, type: 'FILL_IN_BLANK', questionText: "A small b_ _ . (Con ong)", correctAnswer: "bee", imageUrl: "https://images.unsplash.com/photo-1473116763249-2faaef81ccda?w=400", explanation: "Bee l√† con ong.", hint: "B-E-E." },
            { id: 90, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: TR∆Ø·ªúNG H·ªåC", rearrangeParts: ["S", "C", "H", "O", "O", "L"], correctAnswer: "SCHOOL", imageUrl: "https://images.unsplash.com/photo-1497633762265-9d179a990aa6?w=400", explanation: "School l√† tr∆∞·ªùng h·ªçc.", hint: "N∆°i b√© g·∫∑p th·∫ßy c√¥ v√† b·∫°n b√®." },
            { id: 91, type: 'MULTIPLE_CHOICE', questionText: "S·ªë 4 l√† g√¨?", options: ["One", "Two", "Three", "Four"], correctAnswer: "Four", imageUrl: "https://images.unsplash.com/photo-1599508704512-2f19fe912053?w=400", explanation: "Four l√† 4.", hint: "F-O-U-R." },
            { id: 92, type: 'FILL_IN_BLANK', questionText: "Eat an a_ _ _ _ . (Qu·∫£ t√°o)", correctAnswer: "apple", imageUrl: "https://images.unsplash.com/photo-1567306226416-28f0efdc88ce?w=400", explanation: "Apple l√† qu·∫£ t√°o.", hint: "B·∫Øt ƒë·∫ßu b·∫±ng A." },
            { id: 93, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: K·∫∏O", rearrangeParts: ["C", "A", "N", "D", "Y"], correctAnswer: "CANDY", imageUrl: "https://images.unsplash.com/photo-1581798459219-318e76aecc7b?w=400", explanation: "Candy l√† k·∫πo.", hint: "V·ªã r·∫•t ng·ªçt b√© th√≠ch." },
            { id: 94, type: 'MULTIPLE_CHOICE', questionText: "Ch·ªã/Em g√°i l√† g√¨?", options: ["Sister", "Brother", "Mother", "Father"], correctAnswer: "Sister", imageUrl: "https://images.unsplash.com/photo-1511895426328-dc8714191300?w=400", explanation: "Sister l√† ch·ªã em g√°i.", hint: "B·∫Øt ƒë·∫ßu b·∫±ng S." },
            { id: 95, type: 'FILL_IN_BLANK', questionText: "A tall g_ _ _ _ _ _ . (H∆∞∆°u cao c·ªï)", correctAnswer: "giraffe", imageUrl: "https://images.unsplash.com/photo-1501032359160-5d8cdec44f77?w=400", explanation: "Giraffe l√† h∆∞∆°u cao c·ªï.", hint: "C√≥ c√°i c·ªï r·∫•t d√†i." },
            { id: 96, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: C√ÅI M≈®", rearrangeParts: ["H", "A", "T"], correctAnswer: "HAT", imageUrl: "https://images.unsplash.com/photo-1521369909029-2afed882baee?w=400", explanation: "Hat l√† c√°i m≈©.", hint: "ƒê·ªôi l√™n ƒë·∫ßu." },
            { id: 97, type: 'MULTIPLE_CHOICE', questionText: "S·ªë 0 l√† g√¨?", options: ["One", "Zero", "Two", "Ten"], correctAnswer: "Zero", imageUrl: "https://images.unsplash.com/photo-1599508704512-2f19fe912053?w=400", explanation: "Zero l√† 0.", hint: "Tr√≤n tr·ªãa nh∆∞ qu·∫£ tr·ª©ng." },
            { id: 98, type: 'FILL_IN_BLANK', questionText: "The s_ _ is blue.", correctAnswer: "sky", imageUrl: "https://images.unsplash.com/photo-1534067783941-51c9c23ecefd?w=400", explanation: "Sky l√† b·∫ßu tr·ªùi.", hint: "S-K-Y." },
            { id: 99, type: 'REARRANGE', questionText: "S·∫Øp x·∫øp: CON KH·ªà", rearrangeParts: ["M", "O", "N", "K", "E", "Y"], correctAnswer: "MONKEY", imageUrl: "https://images.unsplash.com/photo-1540573133985-87b6da6d54a9?w=400", explanation: "Monkey l√† con kh·ªâ.", hint: "M-O-N-K-E-Y." },
            { id: 100, type: 'MULTIPLE_CHOICE', questionText: "Ch·ªçn: CIRCLE (H√¨nh tr√≤n)", options: ["Circle", "Square", "Triangle", "Star"], correctAnswer: "Circle", imageUrl: "https://images.unsplash.com/photo-1550684848-fac1c5b4e853?w=400", explanation: "Circle l√† h√¨nh tr√≤n.", hint: "Tr√≤n nh∆∞ c√°i b√°nh v√≤ng." }
        ];

        // --- UI COMPONENTS ---

        const Button = ({ children, variant = 'primary', size = 'md', className = '', ...props }) => {
            const baseStyles = "inline-flex items-center justify-center font-bold transition-all duration-200 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm transform active:scale-95";
            const variants = {
                primary: "bg-blue-600 hover:bg-blue-700 text-white shadow-blue-500/30",
                secondary: "bg-emerald-500 hover:bg-emerald-600 text-white",
                danger: "bg-rose-500 hover:bg-rose-600 text-white",
                outline: "bg-white border-2 border-slate-300 text-slate-600 hover:border-blue-500 hover:text-blue-600"
            };
            const sizes = { sm: "px-4 py-1.5 text-sm", md: "px-6 py-3 text-base", lg: "px-8 py-4 text-lg" };
            return <button className={`${baseStyles} ${variants[variant]} ${sizes[size]} ${className}`} {...props}>{children}</button>;
        };

        const AudioPlayer = ({ textToSpeak }) => {
            const [isPlaying, setIsPlaying] = useState(false);
            const speak = () => {
                if (!window.speechSynthesis) return;
                window.speechSynthesis.cancel();
                const u = new SpeechSynthesisUtterance(textToSpeak);
                u.lang = 'en-US'; u.rate = 0.8; u.pitch = 1.1;
                u.onstart = () => setIsPlaying(true);
                u.onend = () => setIsPlaying(false);
                u.onerror = () => setIsPlaying(false);
                window.speechSynthesis.speak(u);
            };
            return (
                <div className="flex items-center gap-3 bg-blue-50 p-4 rounded-2xl border-2 border-blue-100 shadow-sm transition-all hover:shadow-md">
                    <button onClick={speak} className={`w-12 h-12 flex items-center justify-center rounded-full text-white shadow-lg ${isPlaying ? 'bg-rose-500 animate-pulse' : 'bg-blue-600 hover:bg-blue-700'}`}>
                        {isPlaying ? "||" : "‚ñ∂"}
                    </button>
                    <div className="flex flex-col">
                        <span className="text-xs font-black text-blue-400 uppercase tracking-widest">√Çm thanh</span>
                        <span className="text-sm font-bold text-blue-700">Nghe c√¥ gi√°o ƒë·ªçc</span>
                    </div>
                </div>
            );
        };

        const QuestionCard = ({ question, onAnswer, isAnswered, userAnswer }) => {
            const [inputVal, setInputVal] = useState('');
            const [jumbled, setJumbled] = useState([]);
            const [selected, setSelected] = useState([]);
            const [hint, setHint] = useState(false);

            useEffect(() => {
                setInputVal(''); setSelected([]); setHint(false);
                if (question.type === 'REARRANGE' && question.rearrangeParts) {
                    setJumbled([...question.rearrangeParts].sort(() => Math.random() - 0.5));
                }
            }, [question.id]);

            const normalize = (s) => s ? s.normalize('NFC').replace(/[.,!?;:'"]/g, '').replace(/\s+/g, '').trim().toLowerCase() : "";
            const isCorrect = userAnswer && normalize(userAnswer) === normalize(question.correctAnswer);

            const handlePart = (p, i) => {
                if (isAnswered) return;
                const id = `${p}-${i}`;
                if (selected.includes(id)) setSelected(prev => prev.filter(x => x !== id));
                else setSelected(prev => [...prev, id]);
            };

            const submitRearrange = () => {
                const isSingle = !question.correctAnswer.includes(' ');
                onAnswer(selected.map(x => x.split('-')[0]).join(isSingle ? '' : ' '));
            };

            return (
                <div className="w-full max-w-3xl animate-fade-in bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-100 mx-auto relative z-10">
                    <div className="bg-slate-50 px-6 py-4 flex justify-between items-center border-b">
                        <span className="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-black uppercase tracking-wider">{question.type}</span>
                        {!isAnswered && <button onClick={() => setHint(!hint)} className="text-amber-600 text-xs font-bold border border-amber-200 px-3 py-1 rounded-full hover:bg-amber-50">{hint ? "·∫®n g·ª£i √Ω" : "G·ª£i √Ω üí°"}</button>}
                    </div>
                    <div className="p-6 sm:p-10">
                        {question.imageUrl && <div className="flex justify-center bg-slate-50 p-4 rounded-2xl mb-6 shadow-inner"><img src={question.imageUrl} className="max-h-56 object-contain rounded-xl" alt="Hint" /></div>}
                        {question.questionText.toLowerCase().includes('nghe') && <AudioPlayer textToSpeak={question.correctAnswer} />}
                        {hint && !isAnswered && <div className="mt-4 p-4 bg-amber-50 rounded-xl border border-amber-200 text-sm text-amber-900 animate-slide-up font-bold">üí° C√¥ gi√°o d·∫∑n: {question.hint}</div>}
                        <h2 className="text-xl sm:text-2xl font-black text-slate-800 my-6 leading-tight">{question.questionText}</h2>

                        {question.type === 'MULTIPLE_CHOICE' && (
                            <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                {question.options?.map((opt, idx) => (
                                    <button key={idx} onClick={() => !isAnswered && onAnswer(opt)} disabled={isAnswered} className={`p-5 rounded-2xl text-left border-4 transition-all ${isAnswered ? (normalize(opt) === normalize(question.correctAnswer) ? 'bg-green-100 border-green-500' : normalize(opt) === normalize(userAnswer || "") ? 'bg-red-100 border-red-500' : 'opacity-60 grayscale') : 'bg-white border-slate-100 hover:border-blue-400 hover:shadow-lg'}`}>
                                        <span className="font-black text-xl">{String.fromCharCode(65 + idx)}. {opt}</span>
                                    </button>
                                ))}
                            </div>
                        )}

                        {question.type === 'FILL_IN_BLANK' && (
                            <div className="flex gap-2">
                                <input type="text" value={isAnswered ? userAnswer : inputVal} onChange={e => setInputVal(e.target.value)} disabled={isAnswered} className={`flex-1 p-5 rounded-2xl border-4 text-2xl font-bold uppercase text-center outline-none ${isAnswered ? (isCorrect ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50') : 'border-slate-100 focus:border-blue-500'}`} placeholder="..." />
                                {!isAnswered && <Button onClick={() => inputVal.trim() && onAnswer(inputVal)}>G·ª≠i</Button>}
                            </div>
                        )}

                        {question.type === 'REARRANGE' && (
                            <div className="space-y-6">
                                <div className="flex flex-wrap justify-center gap-3 p-4 bg-slate-50 rounded-2xl border-2 border-dashed">
                                    {jumbled.map((p, i) => !selected.includes(`${p}-${i}`) && <button key={`${p}-${i}`} onClick={() => handlePart(p, i)} className="min-w-[3rem] h-12 bg-white border-2 rounded-xl font-black text-xl text-blue-600 shadow-sm">{p}</button>)}
                                </div>
                                <div className={`min-h-[70px] p-4 rounded-2xl border-4 border-dashed flex flex-wrap justify-center gap-2 items-center ${isAnswered ? (isCorrect ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50') : 'border-blue-100 bg-blue-50/20'}`}>
                                    {selected.map((s, idx) => <button key={idx} onClick={() => handlePart(s.split('-')[0], parseInt(s.split('-')[1]))} disabled={isAnswered} className="px-4 h-12 bg-blue-600 text-white rounded-xl font-black text-xl animate-bounce-short shadow-md">{s.split('-')[0]}</button>)}
                                </div>
                                {!isAnswered && <Button onClick={submitRearrange} disabled={!selected.length} className="w-full">X√°c nh·∫≠n</Button>}
                            </div>
                        )}

                        {isAnswered && (
                            <div className={`mt-8 p-6 rounded-2xl border-4 shadow-lg ${isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`}>
                                <h3 className="font-black text-xl mb-2">{isCorrect ? 'TUY·ªÜT V·ªúI!' : 'B√â TH·ª¨ L·∫†I NH√â!'}</h3>
                                {!isCorrect && <div className="mb-2"><span className="text-sm font-bold opacity-70">ƒê√°p √°n: </span><span className="font-black text-2xl uppercase tracking-widest">{question.correctAnswer}</span></div>}
                                <p className="text-sm font-medium italic">"{question.explanation}"</p>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const App = () => {
            const [state, setState] = useState('START');
            const [name, setName] = useState('');
            const [idx, setIdx] = useState(0);
            const [ans, setAns] = useState([]);
            const [grid, setGrid] = useState(false);

            const start = () => { if(name.trim()) { setAns([]); setIdx(0); setState('PLAYING'); } };
            const onAns = (r) => {
                const q = QUIZ_DATA[idx];
                const correct = r.normalize('NFC').replace(/\s+/g, '').toLowerCase() === q.correctAnswer.normalize('NFC').replace(/\s+/g, '').toLowerCase();
                setAns(prev => [...prev.filter(x => x.questionId !== q.id), { questionId: q.id, userResponse: r, isCorrect: correct }]);
            };

            if (state === 'START') return (
                <div className="min-h-screen flex items-center justify-center bg-blue-600 p-4 relative overflow-hidden">
                    {[...Array(10)].map((_, i) => <div key={i} className="bubble" style={{ left: `${Math.random() * 100}%`, width: `${20+Math.random()*40}px`, height: `${20+Math.random()*40}px`, animationDelay: `${Math.random()*10}s` }}></div>)}
                    <div className="bg-white rounded-[3rem] p-10 max-w-md w-full text-center shadow-2xl border-8 border-white/20 animate-slide-up relative z-10">
                        <div className="w-24 h-24 bg-blue-100 text-blue-600 rounded-3xl flex items-center justify-center mx-auto mb-6 text-3xl font-black italic shadow-inner rotate-3">IOE</div>
                        <h1 className="text-3xl font-black mb-6">LUY·ªÜN THI L·ªöP 1<br/><span className="text-blue-600">ƒê·ªÄ S·ªê 01</span></h1>
                        <input type="text" value={name} onChange={e => setName(e.target.value)} placeholder="T√™n b√© y√™u..." className="w-full px-6 py-4 rounded-2xl border-2 mb-6 text-center font-bold text-xl outline-none focus:border-blue-500" />
                        <Button onClick={start} size="lg" className="w-full py-6 text-2xl shadow-xl shadow-blue-200" disabled={!name}>B·∫ÆT ƒê·∫¶U üöÄ</Button>
                    </div>
                </div>
            );

            if (state === 'FINISHED') return (
                <div className="min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4">
                    <div className="bg-white rounded-[3rem] p-10 max-w-2xl w-full text-center shadow-2xl animate-fade-in border-4 border-slate-100">
                        <h2 className="text-3xl font-black mb-4">K·∫æT QU·∫¢ C·ª¶A B√â</h2>
                        <div className="text-7xl font-black text-blue-600 mb-8">{ans.filter(x => x.isCorrect).length * 10} <span className="text-2xl text-slate-400">ƒëi·ªÉm</span></div>
                        <div className="grid grid-cols-2 gap-4 mb-8">
                            <div className="bg-green-50 p-6 rounded-2xl border-2 border-green-100"><div className="text-4xl font-black text-green-600">{ans.filter(x => x.isCorrect).length}</div><div className="text-xs font-black uppercase text-green-400">ƒê√∫ng</div></div>
                            <div className="bg-red-50 p-6 rounded-2xl border-2 border-red-100"><div className="text-4xl font-black text-red-600">{QUIZ_DATA.length - ans.filter(x => x.isCorrect).length}</div><div className="text-xs font-black uppercase text-red-400">Ch∆∞a ƒë√∫ng</div></div>
                        </div>
                        <div className="flex gap-4">
                            <Button onClick={() => setState('START')} className="flex-1 py-4 text-xl">L√†m l·∫°i</Button>
                            <Button variant="outline" onClick={() => window.location.reload()} className="flex-1">Tho√°t</Button>
                        </div>
                    </div>
                </div>
            );

            const q = QUIZ_DATA[idx];
            const userA = ans.find(x => x.questionId === q.id);
            const isAns = !!userA;

            return (
                <div className="min-h-screen bg-slate-100 p-4 pb-32 flex flex-col items-center">
                    <div className="w-full max-w-3xl flex justify-between items-center mb-6 bg-white p-4 rounded-3xl shadow-sm border border-slate-100 relative z-20">
                        <div className="flex flex-col"><span className="text-[10px] font-black uppercase text-slate-400">B√© y√™u</span><span className="font-black text-slate-700">{name}</span></div>
                        <button onClick={() => setGrid(true)} className="px-5 py-2 bg-slate-100 hover:bg-slate-200 rounded-2xl font-black text-sm text-slate-500 transition-colors">Danh s√°ch</button>
                        <div className="flex flex-col items-end"><span className="text-[10px] font-black uppercase text-slate-400">C√¢u s·ªë</span><span className="font-black text-blue-600">{idx + 1} / {QUIZ_DATA.length}</span></div>
                    </div>
                    
                    <QuestionCard question={q} onAnswer={onAns} isAnswered={isAns} userAnswer={userA?.userResponse} />

                    <div className="fixed bottom-0 left-0 right-0 p-4 bg-white/90 backdrop-blur-md border-t shadow-lg z-30 flex justify-center">
                        <div className="w-full max-w-3xl mx-auto flex gap-4">
                            <Button variant="outline" onClick={() => setIdx(i => Math.max(0, i-1))} disabled={idx === 0} className="w-24">Tr∆∞·ªõc</Button>
                            {isAns ? (
                                idx === QUIZ_DATA.length - 1 ? <Button variant="secondary" onClick={() => setState('FINISHED')} className="flex-1">K·∫øt th√∫c b√†i thi</Button> : <Button onClick={() => setIdx(i => i + 1)} className="flex-1">C√¢u ti·∫øp theo ‚Üí</Button>
                            ) : <Button variant="outline" onClick={() => setIdx(i => Math.min(QUIZ_DATA.length-1, i+1))} className="flex-1">B·ªè qua</Button>}
                            <Button variant="outline" onClick={() => setIdx(i => Math.min(QUIZ_DATA.length-1, i+1))} disabled={idx === QUIZ_DATA.length-1} className="w-24">Sau</Button>
                        </div>
                    </div>

                    {grid && (
                        <div className="fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 p-4 flex items-center justify-center animate-fade-in">
                            <div className="bg-white rounded-[2.5rem] max-w-3xl w-full p-8 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto custom-scrollbar">
                                <div className="flex justify-between items-center mb-8">
                                    <h3 className="font-black text-2xl">B·∫£ng c√¢u h·ªèi</h3>
                                    <button onClick={() => setGrid(false)} className="w-10 h-10 flex items-center justify-center bg-slate-100 rounded-full hover:bg-slate-200 transition-colors">‚úï</button>
                                </div>
                                <div className="grid grid-cols-5 sm:grid-cols-10 gap-3">
                                    {QUIZ_DATA.map((_, i) => {
                                        const a = ans.find(x => x.questionId === QUIZ_DATA[i].id);
                                        return <button key={i} onClick={() => { setIdx(i); setGrid(false); }} className={`h-12 rounded-xl font-black border-2 transition-all ${idx === i ? 'border-blue-500 bg-blue-50 text-blue-600' : a ? (a.isCorrect ? 'bg-green-500 text-white border-green-600' : 'bg-red-500 text-white border-red-600') : 'bg-slate-50 border-transparent text-slate-400'}`}>{i+1}</button>
                                    })}
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
